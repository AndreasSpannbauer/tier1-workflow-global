---
epic_id: {{ epic_id }}
title: {{ title }}
type: specification
status: backlog
priority: {{ priority }}
created: {{ created }}
domain: {{ domain }}
recommended_mode: {{ recommended_mode }}
estimated_complexity: {{ estimated_complexity }}
complexity_factors:
  architectural_novelty: {{ architectural_novelty }}
  cross_domain: {{ cross_domain }}
  risk_level: {{ risk_level }}
  established_patterns: {{ established_patterns }}
mode_reasoning: |
  {{ mode_reasoning }}
---

# {{ epic_id }}: {{ title }}

## Problem Statement

### User Pain Point
{{ pain_point }}

### Current Workaround
{{ current_workaround }}

### Desired Behavior
{{ desired_behavior }}

### Expected Impact
{{ expected_impact }}

## User Scenarios

### Scenario 1: Primary Use Case
**As a** [user role]
**I want to** [action]
**So that** [benefit]

### Scenario 2: Edge Case
**As a** [user role]
**When** [condition]
**Then** [expected behavior]

## Functional Requirements

### Core Features
{{ core_features }}

### Integration Points
**Existing Components:**
{{ existing_components }}

**New Components:**
{{ new_components }}

**Data Sources:**
{{ data_sources }}

## Data Contracts

### Input Contract
```yaml
# Define expected input structure
```

### Output Contract
```yaml
# Define expected output structure
```

### Events
```yaml
# Define events emitted/consumed
```

## Technical Constraints

### Performance Requirements
{{ performance_requirements }}

### Security Considerations
{{ security_considerations }}

### Compatibility Constraints
{{ compatibility_constraints }}

## Edge Cases

{{ edge_cases }}

## Out of Scope

{{ non_goals }}

## Implementation Strategy

**Recommended Mode:** `{{ recommended_mode }}` {% if recommended_mode == "planning" %}⚠️{% else %}✅{% endif %}

**Complexity Score:** {{ estimated_complexity }}/10

**Complexity Factors:**
- Architectural novelty: {{ architectural_novelty }}
- Cross-domain impact: {{ cross_domain }}
- Risk level: {{ risk_level }}
- Established patterns: {{ established_patterns }}

**Reasoning:**
{{ mode_reasoning }}

{% if recommended_mode == "planning" %}
**Planning mode recommended because:**
- Requires detailed design review before implementation
- Multiple valid approaches need evaluation
- High-risk changes requiring careful analysis
- Novel architectural patterns not yet established

**Next step:** Complete architecture.md and generate detailed implementation plan (file-tasks.md)
{% else %}
**Direct mode recommended because:**
- Follows established patterns in codebase
- Clear implementation path with low risk
- Single-domain changes or well-understood cross-domain patterns
- Standard CRUD operations or routine enhancements

**Next step:** Review architecture.md and execute workflow directly (agents will implement from briefings)
{% endif %}

## Success Criteria

- [ ] All functional requirements implemented
- [ ] Performance targets met
- [ ] Security audit passed
- [ ] Integration tests passing
- [ ] Documentation complete

## References

- [Architecture](./architecture.md)
- [Implementation Details](./implementation-details/)
- [Contracts](./contracts/)
